<div class="container">
    <h3>Account Management</h3>
    <div class="card">
        <div class="card-header">Account Information</div>
        <div class="card-body">
            <table class="table table-striped table-borderless">
                <tbody>
                    <tr>
                        <td>Username</td>
                        <td>{{username}}</td>
                    </tr>
                    <tr>
                        <td>Full Name</td>
                        <td>{{fullname}}</td>
                    </tr>
                    <tr>
                        <td>Institution</td>
                        <td>{{institution}}</td>
                    </tr>
                    <tr>
                        <td>Email</td>
                        <td>{{email}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="card">
        <div class="card-header">Change Password</div>
        <div class="card-body">
            <form action="" method="post" novalidate>
                {{ form.hidden_tag() }}
                <table class="table">
                    <tr>
                        <td>{{ form.old_password.label }}</td>
                        <td>{{ form.old_password() }}</td>
                    </tr>
                    <tr>
                        <td>{{ form.new_password.label }}</td>
                        <td>{{ form.new_password() }}</td>
                    </tr>
                    <tr>
                        <td>{{ form.confirm_password.label }}</td>
                        <td>{{ form.confirm_password() }}</td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>{{ form.submit() }}</td>
                    </tr>
                </table>
                {% set empty_flag = false %}
                {% if 'old_password' in form.errors %}
                    {% if form.errors['old_password'][0] == "Form fields cannot be empty" and empty_flag is sameas false %}
                        {% set empty_flag = true %}
                        <div class="errorbox">
                            {{ form.errors['old_password'][0] }}
                        </div>
                    {% elif empty_flag is sameas false %}
                        <div class="errorbox">
                            {{ form.errors['old_password'][0] }}
                        </div>
                    {% endif %}
                {% elif 'new_password' in form.errors %}
                    {% if form.errors['new_password'][0] == "Form fields cannot be empty" and empty_flag is sameas false %}
                        {% set empty_flag = true %}
                        <div class="errorbox">
                            {{ form.errors['new_password'][0] }}
                        </div>
                    {% elif empty_flag is sameas false %}
                        <div class="errorbox">
                            {{ form.errors['new_password'][0] }}
                        </div>    
                    {% endif %}
                {% elif 'confirm_password' in form.errors %}
                    {% if form.errors['confirm_password'][0] == "Form fields cannot be empty" and empty_flag is sameas false %}
                        {% set empty_flag = true %}
                        <div class="errorbox">
                            {{ form.errors['confirm_password'][0] }}
                        </div>
                    {% elif empty_flag is sameas false %}
                        <div class="errorbox">
                            {{ form.errors['confirm_password'][0] }}
                        </div>    
                    {% endif %}
                {% endif %}


            </form>
        </div>
    </div>
</div>